module.exports = {

"[project]/node_modules/@thirdweb-dev/sdk/dist/QueryParams-0434a670.esm.js [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "D": (()=>DEFAULT_QUERY_ALL_COUNT),
    "F": (()=>FALLBACK_METADATA),
    "I": (()=>InterfaceId_IERC721),
    "a": (()=>InterfaceId_IERC1155),
    "b": (()=>uploadOrExtractURI),
    "c": (()=>fetchTokenMetadataForContract),
    "f": (()=>fetchTokenMetadata),
    "g": (()=>getBaseUriFromBatch),
    "u": (()=>uploadOrExtractURIs)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$setErc20Allowance$2d$41394a37$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/setErc20Allowance-41394a37.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$utils$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__utils$3e$__ = __turbopack_context__.i("[project]/node_modules/ethers/lib.esm/utils.js [app-ssr] (ecmascript) <export * as utils>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ethersproject/bignumber/lib.esm/bignumber.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$contracts$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ethersproject/contracts/lib.esm/index.js [app-ssr] (ecmascript)");
;
;
;
/**
 * @internal
 */ /**
 * @internal
 */ const InterfaceId_IERC721 = /* @__PURE__ */ (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$utils$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__utils$3e$__["utils"].arrayify("0x80ac58cd"))();
/**
 * @internal
 */ const InterfaceId_IERC1155 = /* @__PURE__ */ (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$utils$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__utils$3e$__["utils"].arrayify("0xd9b67a26"))();
const FALLBACK_METADATA = {
    name: "Failed to load NFT metadata"
};
/**
 * fetches the token metadata
 * @param tokenId - the id (to get it back in the output)
 * @param tokenUri - the uri to fetch
 * @param storage - which storage to fetch from
 *
 * @internal
 */ async function fetchTokenMetadata(tokenId, tokenUri, storage) {
    // check for base64 encoded JSON
    if (tokenUri.startsWith("data:application/json;base64") && typeof Buffer !== "undefined") {
        const base64 = tokenUri.split(",")[1];
        const jsonMetadata = JSON.parse(Buffer.from(base64, "base64").toString("utf-8"));
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$setErc20Allowance$2d$41394a37$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"].parse({
            ...jsonMetadata,
            id: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(tokenId).toString(),
            uri: tokenUri
        });
    }
    // handle dynamic id URIs (2 possible formats)
    const parsedUri = tokenUri.replace("{id}", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$utils$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__utils$3e$__["utils"].hexZeroPad(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(tokenId).toHexString(), 32).slice(2));
    let jsonMetadata;
    try {
        jsonMetadata = await storage.downloadJSON(parsedUri);
    } catch (err) {
        const unparsedTokenIdUri = tokenUri.replace("{id}", __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(tokenId).toString());
        try {
            jsonMetadata = await storage.downloadJSON(unparsedTokenIdUri);
        } catch (e) {
            console.warn(`failed to get token metadata: ${JSON.stringify({
                tokenId: tokenId.toString(),
                tokenUri
            })} -- falling back to default metadata`);
            jsonMetadata = FALLBACK_METADATA;
        }
    }
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$setErc20Allowance$2d$41394a37$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"].parse({
        ...jsonMetadata,
        id: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(tokenId).toString(),
        uri: tokenUri
    });
}
// Used for marketplace to fetch NFT metadata from contract address + tokenId
/**
 * @internal
 * @param contractAddress - the contract address
 * @param provider - the provider to use
 * @param tokenId - the token id
 * @param storage - the storage to use
 */ async function fetchTokenMetadataForContract(contractAddress, provider, tokenId, storage) {
    let uri;
    const ERC165MetadataAbi = (await __turbopack_context__.r("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC165.json (json, async loader)")(__turbopack_context__.i)).default;
    const erc165 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$contracts$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Contract"](contractAddress, ERC165MetadataAbi, provider);
    const [isERC721, isERC1155] = await Promise.all([
        erc165.supportsInterface(InterfaceId_IERC721),
        erc165.supportsInterface(InterfaceId_IERC1155)
    ]);
    if (isERC721) {
        const ERC721MetadataAbi = (await __turbopack_context__.r("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721Metadata.json (json, async loader)")(__turbopack_context__.i)).default;
        const erc721 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$contracts$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Contract"](contractAddress, ERC721MetadataAbi, provider);
        uri = await erc721.tokenURI(tokenId);
    } else if (isERC1155) {
        const ERC1155MetadataAbi = (await __turbopack_context__.r("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC1155Metadata.json (json, async loader)")(__turbopack_context__.i)).default;
        const erc1155 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$contracts$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Contract"](contractAddress, ERC1155MetadataAbi, provider);
        uri = await erc1155.uri(tokenId);
    } else {
        throw Error("Contract must implement ERC 1155 or ERC 721.");
    }
    if (!uri) {
        // no uri found, return fallback metadata
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$setErc20Allowance$2d$41394a37$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"].parse({
            ...FALLBACK_METADATA,
            id: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(tokenId).toString(),
            uri: ""
        });
    }
    return fetchTokenMetadata(tokenId, uri, storage);
}
/**
 * @internal
 * @param metadata - the metadata to upload
 * @param storage - the storage to use
 */ async function uploadOrExtractURI(metadata, storage) {
    if (typeof metadata === "string") {
        return metadata;
    } else {
        return await storage.upload(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$setErc20Allowance$2d$41394a37$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["C"].parse(metadata));
    }
}
/**
 * @internal
 * @param metadatas - the metadata to upload
 * @param storage - the storage to use
 * @param startNumber - the number to start the file names at
 * @param contractAddress - the contract address
 * @param signerAddress - the signer address
 * @param options - options
 */ async function uploadOrExtractURIs(metadatas, storage, startNumber, options) {
    if (isUriList(metadatas)) {
        return metadatas;
    } else if (isMetadataList(metadatas)) {
        const uris = await storage.uploadBatch(metadatas.map((m)=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$setErc20Allowance$2d$41394a37$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["C"].parse(m)), {
            rewriteFileNames: {
                fileStartNumber: startNumber || 0
            },
            onProgress: options?.onProgress
        });
        return uris;
    } else {
        throw new Error("NFT metadatas must all be of the same type (all URI or all NFTMetadataInput)");
    }
}
function getBaseUriFromBatch(uris) {
    const baseUri = uris[0].substring(0, uris[0].lastIndexOf("/"));
    for(let i = 0; i < uris.length; i++){
        const uri = uris[i].substring(0, uris[i].lastIndexOf("/"));
        if (baseUri !== uri) {
            throw new Error(`Can only create batches with the same base URI for every entry in the batch. Expected '${baseUri}' but got '${uri}'`);
        }
    }
    // Ensure that baseUri ends with trailing slash
    return baseUri.replace(/\/$/, "") + "/";
}
function isUriList(metadatas) {
    return metadatas.find((m)=>typeof m !== "string") === undefined;
}
function isMetadataList(metadatas) {
    return metadatas.find((m)=>typeof m !== "object") === undefined;
}
/**
 * @internal
 */ const DEFAULT_QUERY_ALL_COUNT = 100;
;
}}),
"[project]/node_modules/@thirdweb-dev/sdk/dist/marketplace-9183b935.esm.js [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "a": (()=>isWinningBid),
    "g": (()=>getAllInBatches),
    "h": (()=>handleTokenApproval),
    "i": (()=>isTokenApprovedForTransfer),
    "m": (()=>mapOffer),
    "v": (()=>validateNewListingParam)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$contracts$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ethersproject/contracts/lib.esm/index.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ethersproject/bignumber/lib.esm/bignumber.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/tiny-invariant/dist/esm/tiny-invariant.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/QueryParams-0434a670.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/index-6d283666.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/fetchCurrencyValue-473fae98.esm.js [app-ssr] (ecmascript)");
;
;
;
;
;
/**
 * This method checks if the given token is approved for the transferrerContractAddress contract.
 * This is particularly useful for contracts that need to transfer NFTs on the users' behalf
 *
 * @internal
 * @param provider - The connected provider
 * @param transferrerContractAddress - The address of the marketplace contract
 * @param assetContract - The address of the asset contract.
 * @param tokenId - The token id of the token.
 * @param owner - The address of the account that owns the token.
 * @returns  True if the transferrerContractAddress is approved on the token, false otherwise.
 */ async function isTokenApprovedForTransfer(provider, transferrerContractAddress, assetContract, tokenId, owner) {
    try {
        const ERC165Abi = (await __turbopack_context__.r("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC165.json (json, async loader)")(__turbopack_context__.i)).default;
        const erc165 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$contracts$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Contract"](assetContract, ERC165Abi, provider);
        const [isERC721, isERC1155] = await Promise.all([
            erc165.supportsInterface(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["I"]),
            erc165.supportsInterface(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])
        ]);
        if (isERC721) {
            const ERC721Abi = (await __turbopack_context__.r("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721.json (json, async loader)")(__turbopack_context__.i)).default;
            const asset = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$contracts$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Contract"](assetContract, ERC721Abi, provider);
            const approved = await asset.isApprovedForAll(owner, transferrerContractAddress);
            if (approved) {
                return true;
            }
            // Handle reverts in case of non-existent tokens
            let approvedAddress;
            try {
                approvedAddress = await asset.getApproved(tokenId);
            } catch (e) {}
            return approvedAddress?.toLowerCase() === transferrerContractAddress.toLowerCase();
        } else if (isERC1155) {
            const ERC1155Abi = (await __turbopack_context__.r("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC1155.json (json, async loader)")(__turbopack_context__.i)).default;
            const asset = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$contracts$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Contract"](assetContract, ERC1155Abi, provider);
            return await asset.isApprovedForAll(owner, transferrerContractAddress);
        } else {
            console.error("Contract does not implement ERC 1155 or ERC 721.");
            return false;
        }
    } catch (err) {
        console.error("Failed to check if token is approved", err);
        return false;
    }
}
/**
 * Checks if the marketplace is approved to make transfers on the assetContract
 * If not, it tries to set the approval.
 * @param contractWrapper - The contract wrapper to use
 * @param marketplaceAddress - The address of the marketplace contract
 * @param assetContract - The address of the asset contract.
 * @param tokenId - The token id of the token.
 * @param from - The address of the account that owns the token.
 */ async function handleTokenApproval(contractWrapper, marketplaceAddress, assetContract, tokenId, from) {
    const ERC165Abi = (await __turbopack_context__.r("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC165.json (json, async loader)")(__turbopack_context__.i)).default;
    const erc165 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["cx"](contractWrapper.getSignerOrProvider(), assetContract, ERC165Abi, contractWrapper.options, contractWrapper.storage);
    const [isERC721, isERC1155] = await Promise.all([
        erc165.read("supportsInterface", [
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["I"]
        ]),
        erc165.read("supportsInterface", [
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"]
        ])
    ]);
    // check for token approval
    if (isERC721) {
        const ERC721Abi = (await __turbopack_context__.r("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721.json (json, async loader)")(__turbopack_context__.i)).default;
        const asset = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["cx"](contractWrapper.getSignerOrProvider(), assetContract, ERC721Abi, contractWrapper.options, contractWrapper.storage);
        const approved = await asset.read("isApprovedForAll", [
            from,
            marketplaceAddress
        ]);
        if (!approved) {
            const isTokenApproved = (await asset.read("getApproved", [
                tokenId
            ])).toLowerCase() === marketplaceAddress.toLowerCase();
            if (!isTokenApproved) {
                await asset.sendTransaction("setApprovalForAll", [
                    marketplaceAddress,
                    true
                ]);
            }
        }
    } else if (isERC1155) {
        const ERC1155Abi = (await __turbopack_context__.r("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC1155.json (json, async loader)")(__turbopack_context__.i)).default;
        const asset = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["cx"](contractWrapper.getSignerOrProvider(), assetContract, ERC1155Abi, contractWrapper.options, contractWrapper.storage);
        const approved = await asset.read("isApprovedForAll", [
            from,
            marketplaceAddress
        ]);
        if (!approved) {
            await asset.sendTransaction("setApprovalForAll", [
                marketplaceAddress,
                true
            ]);
        }
    } else {
        throw Error("Contract must implement ERC 1155 or ERC 721.");
    }
}
/**
 * Used to verify fields in new listing.
 * @internal
 */ // TODO this should be done in zod
function validateNewListingParam(param) {
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(param.assetContractAddress !== undefined && param.assetContractAddress !== null, "Asset contract address is required");
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(param.buyoutPricePerToken !== undefined && param.buyoutPricePerToken !== null, "Buyout price is required");
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(param.listingDurationInSeconds !== undefined && param.listingDurationInSeconds !== null, "Listing duration is required");
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(param.startTimestamp !== undefined && param.startTimestamp !== null, "Start time is required");
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(param.tokenId !== undefined && param.tokenId !== null, "Token ID is required");
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(param.quantity !== undefined && param.quantity !== null, "Quantity is required");
    switch(param.type){
        case "NewAuctionListing":
            {
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(param.reservePricePerToken !== undefined && param.reservePricePerToken !== null, "Reserve price is required");
            }
    }
}
/**
 * Maps a contract offer to the strict interface
 *
 * @internal
 * @param offer - The offer to map
 * @returns  An `Offer` object
 */ async function mapOffer(provider, listingId, offer) {
    return {
        quantity: offer.quantityDesired,
        pricePerToken: offer.pricePerToken,
        currencyContractAddress: offer.currency,
        buyerAddress: offer.offeror,
        quantityDesired: offer.quantityWanted,
        currencyValue: await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(provider, offer.currency, offer.quantityWanted.mul(offer.pricePerToken)),
        listingId
    };
}
function isWinningBid(winningPrice, newBidPrice, bidBuffer) {
    bidBuffer = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(bidBuffer);
    winningPrice = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(winningPrice);
    newBidPrice = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(newBidPrice);
    if (winningPrice.eq(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(0))) {
        return false;
    }
    const buffer = newBidPrice.sub(winningPrice).mul(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["dJ"]).div(winningPrice);
    return buffer.gte(bidBuffer);
}
async function getAllInBatches(start, end, fn) {
    const batches = [];
    while(end - start > __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["D"]){
        batches.push(fn(start, start + __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["D"] - 1));
        start += __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["D"];
    }
    batches.push(fn(start, end - 1));
    return await Promise.all(batches);
}
;
}}),
"[project]/node_modules/@thirdweb-dev/sdk/dist/contract-appuri-c7bd9720.esm.js [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "C": (()=>ContractMetadata),
    "G": (()=>GasCostEstimator),
    "a": (()=>ContractEvents),
    "b": (()=>ContractAppURI),
    "d": (()=>detectContractFeature),
    "h": (()=>hasFunction),
    "t": (()=>toEther)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/index-6d283666.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/transactions-89262635.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$utils$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__utils$3e$__ = __turbopack_context__.i("[project]/node_modules/ethers/lib.esm/utils.js [app-ssr] (ecmascript) <export * as utils>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$storage$2f$dist$2f$thirdweb$2d$dev$2d$storage$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/storage/dist/thirdweb-dev-storage.esm.js [app-ssr] (ecmascript)");
;
;
;
;
/**
 * Type guard for contractWrappers depending on passed feature name
 * @internal
 * @param contractWrapper - The contract wrapper to check
 * @param featureName - The feature name to check
 */ function detectContractFeature(contractWrapper, featureName) {
    const b = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["an"])(contractWrapper.abi, featureName, contractWrapper.extensions);
    return b;
}
/**
 * @internal
 * @param contractWrapper - The contract wrapper to check
 * @param functionName - The function name to check
 */ function hasFunction(functionName, contractWrapper) {
    return functionName in contractWrapper.readContract.functions;
}
/**
 * @internal
 */ /**
 * Handles metadata for a Contract
 * @remarks Read and update metadata for this contract
 * @example
 * ```javascript
 * const contract = await sdk.getContract("{{contract_address}}");
 * const metadata = await contract.metadata.get();
 * await contract.metadata.set({
 *   name: "My Contract",
 *   description: "My contract description"
 * })
 * ```
 * @contract
 * @public
 */ class ContractMetadata {
    featureName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["cO"].name;
    constructor(contractWrapper, schema, storage){
        this.contractWrapper = contractWrapper;
        this.schema = schema;
        this.storage = storage;
    }
    /**
   * @internal
   */ parseOutputMetadata(metadata) {
        return this.schema.output.parseAsync(metadata);
    }
    /**
   * @internal
   */ parseInputMetadata(metadata) {
        return this.schema.input.parseAsync(metadata);
    }
    /**
   * Get the metadata of this contract
   * @remarks Get the metadata of a contract
   * @example
   * ```javascript
   * const metadata = await contract.metadata.get();
   * console.log(metadata);
   * ```
   * @public
   * @returns The metadata of the given contract
   * @twfeature ContractMetadata
   */ async get() {
        let data;
        if (this.supportsContractMetadata(this.contractWrapper)) {
            const uri = await this.contractWrapper.read("contractURI", []);
            if (uri && uri.includes("://")) {
                data = await this.storage.downloadJSON(uri);
            }
        }
        if (!data) {
            try {
                // try fetching metadata from bytecode and / or contract itself
                let contractName;
                try {
                    if (hasFunction("name", this.contractWrapper)) {
                        contractName = await this.contractWrapper.read("name", []);
                    }
                } catch (err) {
                // no-op
                }
                let contractSymbol;
                try {
                    if (hasFunction("symbol", this.contractWrapper)) {
                        contractSymbol = await this.contractWrapper.read("symbol", []);
                    }
                } catch (err) {
                // no-op
                }
                let publishedMetadata;
                try {
                    publishedMetadata = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["K"])(this.contractWrapper.address, this.contractWrapper.getProvider(), this.storage, this.contractWrapper.options);
                } catch (err) {}
                data = {
                    name: contractName || publishedMetadata?.name,
                    symbol: contractSymbol,
                    description: publishedMetadata?.info.title
                };
            } catch (e) {
                throw new Error("Could not fetch contract metadata");
            }
        }
        return this.parseOutputMetadata(data);
    }
    /**
   * Set the metadata of this contract
   * @remarks OVERWRITE the metadata of a contract
   * @example
   * ```javascript
   * await contract.metadata.set({
   *   name: "My Contract",
   *   description: "My contract description"
   * })
   * ```
   * @public
   * @param metadata - the metadata to set
   * @twfeature ContractMetadata
   */ set = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (metadata)=>{
        const uri = await this._parseAndUploadMetadata(metadata);
        const wrapper = this.contractWrapper;
        if (this.supportsContractMetadata(wrapper)) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
                contractWrapper: this.contractWrapper,
                method: "setContractURI",
                args: [
                    uri
                ],
                parse: (receipt)=>{
                    return {
                        receipt,
                        data: this.get
                    };
                }
            });
        } else {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["x"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["cO"]);
        }
    });
    /**
   * Update the metadata of a contract
   * @remarks Update the metadata of a contract
   * @example
   * ```javascript
   * await contract.metadata.update({
   *   description: "My new contract description"
   * })
   * ```
   * @public
   * @param metadata - the metadata to update
   * @twfeature ContractMetadata
   * */ update = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (metadata)=>{
        return await this.set.prepare({
            ...await this.get(),
            ...metadata
        });
    });
    /**
   *
   * @internal
   * @param metadata - the metadata to set
   * @returns
   */ async _parseAndUploadMetadata(metadata) {
        const parsedMetadata = await this.parseInputMetadata(metadata);
        return this.storage.upload(parsedMetadata);
    }
    supportsContractMetadata(contractWrapper) {
        return detectContractFeature(contractWrapper, "ContractMetadata");
    }
}
/**
 * Listen to Contract events in real time
 * @contract
 * @public
 */ class ContractEvents {
    constructor(contractWrapper){
        this.contractWrapper = contractWrapper;
    }
    /**
   * Subscribe to transactions in this contract.
   * @remarks Will emit an "event" object containing the transaction status ('submitted' and 'completed') and hash
   * @example
   * ```javascript
   * contract.events.addTransactionListener((event) => {
   *   console.log(event);
   * }
   * ```
   * @param listener - the callback function that will be called on every transaction
   * @public
   */ addTransactionListener(listener) {
        this.contractWrapper.addListener(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b2"].Transaction, listener);
    }
    /**
   * Remove a transaction listener
   * @remarks Remove a listener that was added with addTransactionListener
   * @example
   * ```javascript
   * contract.events.removeTransactionListener((event) => {
   *  console.log(event);
   * }
   * ```
   * @param listener - the callback function to remove
   * @public
   */ removeTransactionListener(listener) {
        this.contractWrapper.off(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b2"].Transaction, listener);
    }
    /**
   * Subscribe to contract events
   * @remarks You can add a listener for any contract event to run a function when
   * the event is emitted. For example, if you wanted to listen for a "TokensMinted" event,
   * you could do the following:
   * @example
   * ```javascript
   * contract.events.addEventListener("TokensMinted", (event) => {
   *   console.log(event);
   * });
   * ```
   * @public
   * @param eventName - the event name as defined in the contract
   * @param listener - the callback function that will be called on every new event
   * @returns A function to un-subscribe from the event
   */ addEventListener(// eslint-disable-next-line @typescript-eslint/ban-types
    eventName, listener) {
        // validates event, throws error if not found
        const event = this.contractWrapper.readContract.interface.getEvent(eventName);
        const address = this.contractWrapper.address;
        const filter = {
            address,
            topics: [
                this.contractWrapper.readContract.interface.getEventTopic(event)
            ]
        };
        const wrappedListener = (log)=>{
            const parsedLog = this.contractWrapper.readContract.interface.parseLog(log);
            listener(this.toContractEvent(parsedLog.eventFragment, parsedLog.args, log));
        };
        this.contractWrapper.getProvider().on(filter, wrappedListener);
        return ()=>{
            this.contractWrapper.getProvider().off(filter, wrappedListener);
        };
    }
    /**
   * Listen to all events emitted from this contract
   *
   * @example
   * ```javascript
   * contract.events.listenToAllEvents((event) => {
   *   console.log(event.eventName) // the name of the emitted event
   *   console.log(event.data) // event payload
   * }
   * ```
   * @public
   * @param listener - the callback function that will be called on every new event
   * @returns A function that can be called to stop listening to events
   */ listenToAllEvents(listener) {
        const address = this.contractWrapper.address;
        const filter = {
            address
        };
        const wrappedListener = (log)=>{
            try {
                const parsedLog = this.contractWrapper.readContract.interface.parseLog(log);
                listener(this.toContractEvent(parsedLog.eventFragment, parsedLog.args, log));
            } catch (e) {
                console.error("Could not parse event:", log, e);
            }
        };
        this.contractWrapper.getProvider().on(filter, wrappedListener);
        return ()=>{
            this.contractWrapper.getProvider().off(filter, wrappedListener);
        };
    }
    /**
   * Remove an event listener from this contract
   * @remarks Remove a listener that was added with addEventListener
   * @example
   * ```javascript
   * contract.events.removeEventListener("TokensMinted", (event) => {
   *   console.log(event);
   * });
   * ```
   * @public
   * @param eventName - the event name as defined in the contract
   * @param listener - the listener to unregister
   */ removeEventListener(// eslint-disable-next-line @typescript-eslint/ban-types
    eventName, listener) {
        // validates event, throws error if not found
        const event = this.contractWrapper.readContract.interface.getEvent(eventName);
        this.contractWrapper.readContract.off(event.name, listener);
    }
    /**
   * Remove all listeners on this contract
   * @remarks Remove all listeners from a contract
   * @example
   * ```javascript
   * contract.events.removeAllListeners();
   * ```
   * @public
   */ removeAllListeners() {
        this.contractWrapper.readContract.removeAllListeners();
        const address = this.contractWrapper.address;
        const filter = {
            address
        };
        this.contractWrapper.getProvider().removeAllListeners(filter);
    }
    /**
   * Get All Events
   * @remarks Get a list of all the events emitted from this contract during the specified time period
   * @example
   * ```javascript
   * // Optionally pass in filters to limit the blocks from which events are retrieved
   * const filters = {
   *   fromBlock: 0,
   *   toBlock: 1000000,
   * }
   * const events = await contract.events.getAllEvents(filters);
   * console.log(events[0].eventName);
   * console.log(events[0].data);
   * ```
   *
   * @param filters - Specify the from and to block numbers to get events for, defaults to all blocks
   * @returns The event objects of the events emitted with event names and data for each event
   */ async getAllEvents() {
        let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
            fromBlock: 0,
            toBlock: "latest",
            order: "desc"
        };
        const events = await this.contractWrapper.readContract.queryFilter({}, filters.fromBlock, filters.toBlock);
        const orderedEvents = events.sort((a, b)=>{
            return filters.order === "desc" ? b.blockNumber - a.blockNumber : a.blockNumber - b.blockNumber;
        });
        return this.parseEvents(orderedEvents);
    }
    /**
   * Get Events
   * @remarks Get a list of the events of a specific type emitted from this contract during the specified time period
   * @example
   * ```javascript
   * // The name of the event to get logs for
   * const eventName = "Transfer";
   *
   * // Optionally pass in options to limit the blocks from which events are retrieved
   * const options = {
   *   fromBlock: 0,
   *   toBlock: 1000000, // can also pass "latest"
   *   order: "desc",
   *   // Configure event filters (filter on indexed event parameters)
   *   filters: {
   *     from: "0x...",
   *     to: "0x..."
   *   }
   * };
   *
   * const events = await contract.events.getEvents(eventName, options);
   * console.log(events[0].eventName);
   * console.log(events[0].data);
   * ```
   *
   * @param eventName - The name of the event to get logs for
   * @param options - Specify the from and to block numbers to get events for, defaults to all blocks. @see EventQueryOptions
   * @returns The requested event objects with event data
   */ async getEvents(eventName) {
        let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
            fromBlock: 0,
            toBlock: "latest",
            order: "desc"
        };
        const eventInterface = this.contractWrapper.readContract.interface.getEvent(eventName);
        const args = options.filters ? eventInterface.inputs.map((e)=>options.filters[e.name]) : [];
        const filter = this.contractWrapper.readContract.filters[eventInterface.name](...args);
        const events = await this.contractWrapper.readContract.queryFilter(filter, options.fromBlock, options.toBlock);
        const orderedEvents = events.sort((a, b)=>{
            return options.order === "desc" ? b.blockNumber - a.blockNumber : a.blockNumber - b.blockNumber;
        });
        return this.parseEvents(orderedEvents);
    }
    parseEvents(events) {
        return events.map((e)=>{
            const transaction = Object.fromEntries(Object.entries(e).filter((a)=>typeof a[1] !== "function" && a[0] !== "args"));
            if (e.args) {
                const entries = Object.entries(e.args);
                const args = entries.slice(entries.length / 2, entries.length);
                const data = {};
                for (const [key, value] of args){
                    data[key] = value;
                }
                return {
                    eventName: e.event || "",
                    data: data,
                    transaction
                };
            }
            return {
                eventName: e.event || "",
                data: {},
                transaction
            };
        });
    }
    toContractEvent(event, args, rawLog) {
        const transaction = Object.fromEntries(Object.entries(rawLog).filter((a)=>typeof a[1] !== "function" && a[0] !== "args"));
        const results = {};
        event.inputs.forEach((param, index)=>{
            if (Array.isArray(args[index])) {
                const components = param.components;
                if (components) {
                    const arr = args[index];
                    if (param.type === "tuple[]") {
                        // tuple[]
                        const objArray = [];
                        for(let i = 0; i < arr.length; i++){
                            const tuple = arr[i];
                            const obj = {};
                            for(let j = 0; j < components.length; j++){
                                const name = components[j].name;
                                obj[name] = tuple[j];
                            }
                            objArray.push(obj);
                        }
                        results[param.name] = objArray;
                    } else {
                        // simple tuple
                        const obj = {};
                        for(let i = 0; i < components.length; i++){
                            const name = components[i].name;
                            obj[name] = arr[i];
                        }
                        results[param.name] = obj;
                    }
                }
            } else {
                results[param.name] = args[index];
            }
        });
        return {
            eventName: event.name,
            data: results,
            transaction
        };
    }
}
function toEther(amount) {
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$utils$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__utils$3e$__["utils"].formatEther(amount);
}
/**
 * Estimates the gas cost of Contract calls
 * @public
 */ class GasCostEstimator {
    constructor(contractWrapper){
        this.contractWrapper = contractWrapper;
    }
    /**
   * Estimates the cost of gas in native token of the current chain
   * Pass in the same parameters as the contract's function.
   * @remarks Estimate the cost of gas in native token of the current chain
   * @example
   * ```javascript
   * const costOfClaim = await nftDrop?.estimator.gasCostOf("claim", [
   *   "0x...", // receiver
   *   1, // quantity
   *   "0x...", // currency
   *   1, // price per token
   *   [], // proofs
   *   1, // proof max quantity per transaction
   * ]);
   * ```
   * @returns The estimated price in native currency (ETH, MATIC, etc) of calling this function
   * @public
   */ async gasCostOf(// eslint-disable-next-line @typescript-eslint/ban-types
    fn, args) {
        const gasCost = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["$"])(this.contractWrapper.getProvider(), await this.contractWrapper.populateTransaction(fn, args));
        return toEther(gasCost);
    }
    /**
   * Estimates the gas limit of a transaction
   * Pass in the same parameters as the contract's function.
   * @remarks Estimates the gas limit of a transaction
   * @example
   * ```javascript
   * const gasLimitOfClaim = await nftDrop?.estimator.gasLimitOf("claim", [
   *   "0x...", // receiver
   *   1, // quantity
   *   "0x...", // currency
   *   1, // price per token
   *   [], // proofs
   *   1, // proof max quantity per transaction
   * ]);
   * ```
   * @returns The estimated gas limit of the transaction
   * @public
   */ async gasLimitOf(// eslint-disable-next-line @typescript-eslint/ban-types
    fn, args) {
        return this.contractWrapper.estimateGas(fn, args);
    }
    /**
   * Returns the current gas price in gwei
   * @remarks Get the current gas price in gwei
   * @example
   * ```javascript
   * const gasCostInGwei = await contract.estimator.currentGasPriceInGwei();
   * ```
   * @returns The current gas price in gwei
   * @public
   */ async currentGasPriceInGwei() {
        const price = await this.contractWrapper.getProvider().getGasPrice();
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$utils$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__utils$3e$__["utils"].formatUnits(price, "gwei");
    }
}
/**
 * Have an official Application URI for this contract.
 * @remarks Configure an official Application URI for this contract.
 * @example
 * ```javascript
 * const contract = await sdk.getContract("{{contract_address}}");
 * const appURI = await contract.app.get();
 * appURI = "ipfs://some_ipfs_hash";
 *
 * await contract.app.set(appURI)
 * ```
 * @public
 */ class ContractAppURI {
    featureName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["cP"].name;
    constructor(contractWrapper, metadata, storage){
        this.contractWrapper = contractWrapper;
        this.metadata = metadata;
        this.storage = storage;
    }
    /**
   * Get App URI
   * @returns The appURI (typically an IPFS hash)
   * @example
   * ```javascript
   * const appURI = await contract.app.get();
   * console.log(appURI) // "ipfs://some_ipfs_hash";
   * ```
   * @twfeature AppURI
   */ async get() {
        if (detectContractFeature(this.contractWrapper, "AppURI")) {
            return await this.contractWrapper.read("appURI", []);
        }
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$storage$2f$dist$2f$thirdweb$2d$dev$2d$storage$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["replaceGatewayUrlWithScheme"])((await this.metadata.get()).app_uri || "", this.storage.getGatewayUrls());
    }
    /**
   * Set App URI
   * @param appURI - the uri to set (typically an IPFS hash)
   * @example
   * ```javascript
   * const appURI = "ipfs://some_ipfs_hash";
   * await contract.app.set(appURI);
   * ```
   * @twfeature AppURI
   */ set = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (appURI)=>{
        if (detectContractFeature(this.contractWrapper, "AppURI")) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
                contractWrapper: this.contractWrapper,
                method: "setAppURI",
                args: [
                    appURI
                ]
            });
        }
        return await this.metadata.update.prepare({
            app_uri: appURI
        });
    });
}
;
}}),
"[project]/node_modules/@thirdweb-dev/sdk/dist/contract-interceptor-69c9c882.esm.js [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
/**
 * Allows overriding transaction behavior for this contract
 * @internal
 */ __turbopack_context__.s({
    "C": (()=>ContractInterceptor)
});
class ContractInterceptor {
    constructor(contractWrapper){
        this.contractWrapper = contractWrapper;
    }
    /**
   * The next transaction executed will add/replace any overrides passed via the passed in hook.
   * @remarks Overridden values will be applied to the next transaction executed.
   * @example
   * ```javascript
   * contract.interceptor.overrideNextTransaction(() => ({
   *   gasLimit: 3000000,
   * }));
   * ```
   * @param hook - the hook to add or replace any CallOverrides (gas limit, gas price, nonce, from, value, etc...)
   * @public
   */ overrideNextTransaction(hook) {
        this.contractWrapper.withTransactionOverride(hook);
    }
}
;
}}),
"[project]/node_modules/@thirdweb-dev/sdk/dist/contract-platform-fee-e14ecc39.esm.js [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "C": (()=>ContractPlatformFee)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/transactions-89262635.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/index-6d283666.esm.js [app-ssr] (ecmascript)");
;
;
/**
 * Handle platform fees and recipients
 * @remarks Configure platform fees for a contract, which can be applied on certain paid transactions
 * @example
 * ```javascript
 * const contract = await sdk.getContract("{{contract_address}}");
 * const feeInfo = await contract.platformFees.get();
 * await contract.platformFees.set({
 *   platform_fee_basis_points: 100, // 1% fee
 *   platform_fee_recipient: "0x..." // the fee recipient
 * })
 * ```
 * @public
 */ class ContractPlatformFee {
    featureName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["dz"].name;
    constructor(contractWrapper){
        this.contractWrapper = contractWrapper;
    }
    /**
   * Get the platform fee recipient and basis points
   *
   * @example
   * ```javascript
   * const feeInfo = await contract.platformFees.get();
   * console.log(feeInfo.platform_fee_recipient);
   * console.log(feeInfo.platform_fee_basis_points);
   * ```
   * @twfeature PlatformFee
   */ async get() {
        const [platformFeeRecipient, platformFeeBps] = await this.contractWrapper.read("getPlatformFeeInfo", []);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["bM"].parseAsync({
            platform_fee_recipient: platformFeeRecipient,
            platform_fee_basis_points: platformFeeBps
        });
    }
    /**
   * Set the platform fee recipient and basis points
   *
   * @example
   * ```javascript
   * await contract.platformFees.set({
   *   platform_fee_basis_points: 100, // 1% fee
   *   platform_fee_recipient: "0x..." // the fee recipient
   * })
   * ```
   *
   * @param platformFeeInfo - the platform fee information
   * @twfeature PlatformFee
   */ set = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (platformFeeInfo)=>{
        const parsed = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["bM"].parseAsync(platformFeeInfo);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "setPlatformFeeInfo",
            args: [
                parsed.platform_fee_recipient,
                parsed.platform_fee_basis_points
            ]
        });
    });
}
;
}}),
"[project]/node_modules/@thirdweb-dev/sdk/dist/contract-roles-fc490e1c.esm.js [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "C": (()=>ContractRoles)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/tiny-invariant/dist/esm/tiny-invariant.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/index-6d283666.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$appuri$2d$c7bd9720$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/contract-appuri-c7bd9720.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/transactions-89262635.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/fetchCurrencyValue-473fae98.esm.js [app-ssr] (ecmascript)");
;
;
;
;
;
/**
 * Handle contract permissions
 * @remarks Configure roles and permissions for a contract, to restrict certain actions.
 * @example
 * ```javascript
 * const contract = await sdk.getContract("{{contract_address}}");
 * const rolesAndMembers = await contract.roles.getAll();
 * await contract.roles.grantRole("admin", "0x...");
 * ```
 * @public
 */ // eslint-disable-next-line @typescript-eslint/no-unused-vars -- TO BE REMOVED IN V4
class ContractRoles {
    featureName = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d9"].name;
    /**
   * @internal
   * @remarks This is used for typing inside react hooks which is why it has to be public.
   */ constructor(contractWrapper, roles){
        this.contractWrapper = contractWrapper;
        this.roles = roles;
    }
    /** **************************
   * READ FUNCTIONS
   ****************************/ /**
   * Get all members of all roles
   * @remarks See {@link ContractRoles.get} to get a list of addresses that are members of a specific role.
   * @example
   * ```javascript
   * const rolesAndMembers = await contract.roles.getAll();
   * ```
   * @returns A record of {@link Role}s to lists of addresses that are members of the given role.
   * @throws If the contract does not support roles this will throw an error.
   *
   * @public
   * @twfeature PermissionsEnumerable
   */ async getAll() {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(this.roles.length, "this contract has no support for roles");
        const roles = {};
        const entries = Object.entries(this.roles);
        (await Promise.all(entries.map((_ref)=>{
            let [, role] = _ref;
            return this.get(role);
        }))).forEach((item, index)=>roles[entries[index][1]] = item);
        return roles;
    }
    /**
   * Get all members of a specific role
   * @remarks See {@link ContractRoles.getAll} to get get a list of addresses for all supported roles on the contract.
   * @param role - The Role to get a memberlist for.
   * @returns The list of addresses that are members of the specific role.
   * @throws If you are requesting a role that does not exist on the contract this will throw an error.
   *
   * @example Say you want to get the list of addresses that are members of the minter role.
   * ```javascript
   * const minterAddresses = await contract.roles.get("minter");
   * ```
   *
   * @public
   * @twfeature Permissions
   */ async get(role) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(this.roles.includes(role), `this contract does not support the "${role}" role`);
        const wrapper = this.contractWrapper;
        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$appuri$2d$c7bd9720$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])("getRoleMemberCount", wrapper) && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$appuri$2d$c7bd9720$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])("getRoleMember", wrapper)) {
            const roleHash = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["H"])(role);
            const count = (await wrapper.read("getRoleMemberCount", [
                roleHash
            ])).toNumber();
            return await Promise.all(Array.from(Array(count).keys()).map((i)=>wrapper.read("getRoleMember", [
                    roleHash,
                    i
                ])));
        }
        throw new Error("Contract does not support enumerating roles. Please implement IPermissionsEnumerable to unlock this functionality.");
    }
    /**
   * Overwrite the list of members for specific roles
   *
   * @remarks Every role in the list will be overwritten with the new list of addresses provided with them.
   * If you want to add or remove addresses for a single address use {@link ContractRoles.grant} and {@link ContractRoles.revoke} respectively instead.
   * @param rolesWithAddresses - A record of {@link Role}s to lists of addresses that should be members of the given role.
   * @throws If you are requesting a role that does not exist on the contract this will throw an error.
   * @example Say you want to overwrite the list of addresses that are members of the minter role.
   * ```javascript
   * const minterAddresses = await contract.roles.get("minter");
   * await contract.roles.setAll({
   *  minter: []
   * });
   * console.log(await contract.roles.get("minter")); // No matter what members had the role before, the new list will be set to []
   * ```
   * @public
   * @twfeature Permissions
   *
   * */ setAll = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (rolesWithAddresses, actingAddress)=>{
        // if we are removing multiple roles, we need to allways remove the connected wallet address *last*
        // this is so we don't renounce (i.e.)  admin role first and then try to revoke someone else's (i.e.) admin role after (which will revert the entire txn because we are no longer an admin)
        // if it is explicitly passed in (i.e. for estimation) we use that value, otherwise we get it from the connected signer
        const connectedWalletAddress = actingAddress || await this.contractWrapper.getSignerAddress();
        const contractEncoder = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["C"](this.contractWrapper);
        const roles = Object.keys(rolesWithAddresses);
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(roles.length, "you must provide at least one role to set");
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(roles.every((role)=>this.roles.includes(role)), "this contract does not support the given role");
        const currentRoles = await this.getAll();
        const encoded = [];
        // add / remove admin role at the end so we don't revoke admin then grant
        const sortedRoles = roles.sort((role)=>role === "admin" ? 1 : -1);
        for(let i = 0; i < sortedRoles.length; i++){
            const role = sortedRoles[i];
            const [addresses, currentAddresses] = await Promise.all([
                Promise.all(rolesWithAddresses[role]?.map((addressOrEns)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["aQ"])(addressOrEns)) || []),
                Promise.all(currentRoles[role]?.map((addressOrEns)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["aQ"])(addressOrEns)) || [])
            ]);
            const toAdd = addresses.filter((address)=>!currentAddresses.includes(address));
            const toRemove = currentAddresses.filter((address)=>!addresses.includes(address));
            // if we're removing more than one address we have to make sure we always remove the *connected* (acting) wallet address first
            // otherwise we'll revoke the connected wallet address and then try to revoke someone else's address which will revert the entire txn
            if (toRemove.length > 1) {
                const index = toRemove.indexOf(connectedWalletAddress);
                if (index > -1) {
                    toRemove.splice(index, 1);
                    toRemove.push(connectedWalletAddress);
                }
            }
            if (toAdd.length) {
                toAdd.forEach((address)=>{
                    encoded.push(contractEncoder.encode("grantRole", [
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["H"])(role),
                        address
                    ]));
                });
            }
            if (toRemove.length) {
                const revokeFunctionNames = await Promise.all(toRemove.map((address)=>this.getRevokeRoleFunctionName(address)));
                revokeFunctionNames.forEach((revokeFunctionName, index)=>encoded.push(contractEncoder.encode(revokeFunctionName, [
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["H"])(role),
                        toRemove[index]
                    ])));
            }
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "multicall",
            args: [
                encoded
            ]
        });
    });
    /**
   * Throws an error if an address is missing the roles specified.
   *
   * @param roles - The roles to check
   * @param address - The address to check
   *
   * @internal
   */ async verify(roles, address) {
        await Promise.all(roles.map(async (role)=>{
            const [members, resolvedAddress] = await Promise.all([
                this.get(role),
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["aQ"])(address)
            ]);
            if (!members.map((a)=>a.toLowerCase()).includes(resolvedAddress.toLowerCase())) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["o"](resolvedAddress, role);
            }
        }));
    }
    /** **************************
   * WRITE FUNCTIONS
   ****************************/ /**
   * Grant a role to a specific address
   *
   * @remarks Make sure you are sure you want to grant the role to the address.
   *
   * @example
   * ```javascript
   * await contract.roles.grant("minter", "{{wallet_address}}");
   * ```
   *
   * @param role - The {@link Role} to grant to the address
   * @param address - The address to grant the role to
   * @returns The transaction receipt
   * @throws If you are trying to grant does not exist on the contract this will throw an error.
   *
   * @public
   * @twfeature Permissions
   */ grant = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (role, address)=>{
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(this.roles.includes(role), `this contract does not support the "${role}" role`);
        const resolvedAddress = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["aQ"])(address);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "grantRole",
            args: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["H"])(role),
                resolvedAddress
            ]
        });
    });
    /**
   * Revoke a role from a specific address
   *
   * @remarks
   *
   * -- Caution --
   *
   * This will let you remove yourself from the role, too.
   * If you remove yourself from the admin role, you will no longer be able to administer the contract.
   * There is no way to recover from this.
   *
   * @example
   * ```javascript
   * await contract.roles.revoke("minter", "{{wallet_address}}");
   * ```
   *
   * @param role - The {@link Role} to revoke
   * @param address - The address to revoke the role from
   * @returns The transaction receipt
   * @throws If you are trying to revoke does not exist on the module this will throw an error.
   *
   * @public
   * @twfeature Permissions
   */ revoke = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (role, address)=>{
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(this.roles.includes(role), `this contract does not support the "${role}" role`);
        const resolvedAddress = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["aQ"])(address);
        const revokeFunctionName = await this.getRevokeRoleFunctionName(resolvedAddress);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: revokeFunctionName,
            args: [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["H"])(role),
                resolvedAddress
            ]
        });
    });
    /** **************************
   * PRIVATE FUNCTIONS
   ****************************/ async getRevokeRoleFunctionName(address) {
        const [resolvedAddress, signerAddress] = await Promise.all([
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["aQ"])(address),
            this.contractWrapper.getSignerAddress()
        ]);
        if (signerAddress.toLowerCase() === resolvedAddress.toLowerCase()) {
            return "renounceRole";
        }
        return "revokeRole";
    }
}
;
}}),
"[project]/node_modules/@thirdweb-dev/sdk/dist/cleanCurrencyAddress-049d84d8.esm.js [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "c": (()=>cleanCurrencyAddress)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/index-6d283666.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/fetchCurrencyValue-473fae98.esm.js [app-ssr] (ecmascript)");
;
;
/**
 * @internal
 */ function cleanCurrencyAddress(currencyAddress) {
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["i"])(currencyAddress)) {
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a_"];
    }
    return currencyAddress;
}
;
}}),
"[project]/node_modules/@thirdweb-dev/sdk/dist/marketplace-2d2ceb00.esm.js [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "Marketplace": (()=>Marketplace)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ethersproject/bignumber/lib.esm/bignumber.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$constants$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__constants$3e$__ = __turbopack_context__.i("[project]/node_modules/@ethersproject/constants/lib.esm/index.js [app-ssr] (ecmascript) <export * as constants>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$utils$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__utils$3e$__ = __turbopack_context__.i("[project]/node_modules/ethers/lib.esm/utils.js [app-ssr] (ecmascript) <export * as utils>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$contracts$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@ethersproject/contracts/lib.esm/index.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/tiny-invariant/dist/esm/tiny-invariant.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/QueryParams-0434a670.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/fetchCurrencyValue-473fae98.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/index-6d283666.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$marketplace$2d$9183b935$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/marketplace-9183b935.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/transactions-89262635.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$appuri$2d$c7bd9720$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/contract-appuri-c7bd9720.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$interceptor$2d$69c9c882$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/contract-interceptor-69c9c882.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$platform$2d$fee$2d$e14ecc39$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/contract-platform-fee-e14ecc39.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$roles$2d$fc490e1c$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/contract-roles-fc490e1c.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$cleanCurrencyAddress$2d$049d84d8$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/cleanCurrencyAddress-049d84d8.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$normalizePriceValue$2d$c41e4879$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/normalizePriceValue-c41e4879.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$setErc20Allowance$2d$41394a37$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/setErc20Allowance-41394a37.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/sdk/dist/ListingType-e0156743.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/bn.js/lib/bn.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bs58$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/bs58/index.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IBurnableERC20$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IBurnableERC20.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IDrop$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IDrop.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IDropERC20_V2$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropERC20_V2.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IDropSinglePhase$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IDropSinglePhase_V1$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase_V1.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IERC20$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC20.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IERC20Permit$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC20Permit.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IMintableERC20$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IMintableERC20.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IMulticall$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IMulticall.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$ISignatureMintERC20$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC20.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IERC20Metadata$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC20Metadata.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IBurnableERC721$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IBurnableERC721.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IClaimableERC721$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IClaimableERC721.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IDelayedReveal$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IDelayedReveal.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IDropERC721_V3$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropERC721_V3.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IERC721$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IERC721Enumerable$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721Enumerable.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IERC721AQueryableUpgradeable$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721AQueryableUpgradeable.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IERC721Supply$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721Supply.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$ILazyMint$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/ILazyMint.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IMintableERC721$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IMintableERC721.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$ISignatureMintERC721$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC721.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$ISignatureMintERC721_V1$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC721_V1.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$LazyMintWithTier_V1$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/LazyMintWithTier_V1.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$SharedMetadata$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/SharedMetadata.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$zora_IERC721Drop$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/zora_IERC721Drop.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$ILoyaltyCard$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/ILoyaltyCard.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$INFTMetadata$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/INFTMetadata.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IERC721Metadata$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721Metadata.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IBurnableERC1155$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IBurnableERC1155.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IClaimableERC1155$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IClaimableERC1155.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IDrop1155$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IDrop1155.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IDropERC1155_V2$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropERC1155_V2.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IDropSinglePhase1155$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase1155.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IDropSinglePhase1155_V1$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase1155_V1.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IERC1155$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC1155.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IERC1155Metadata$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC1155Metadata.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IERC1155Supply$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC1155Supply.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IERC1155Enumerable$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC1155Enumerable.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IMintableERC1155$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IMintableERC1155.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$ISignatureMintERC1155$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC1155.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IERC2771Context$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC2771Context.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IAppURI$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IAppURI.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IContractMetadata$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IContractMetadata.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IDirectListings$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IDirectListings.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IEnglishAuctions$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IEnglishAuctions.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IOffers$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IOffers.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IPackVRFDirect$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IPackVRFDirect.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IPermissions$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IPermissions.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IPermissionsEnumerable$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IPermissionsEnumerable.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IPlatformFee$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IPlatformFee.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IPrimarySale$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IPrimarySale.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IRoyalty$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IRoyalty.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$Ownable$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/Ownable.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IAirdropERC20$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IAirdropERC20.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IAirdropERC721$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IAirdropERC721.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IAirdropERC1155$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IAirdropERC1155.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IAccountFactoryCore$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IAccountFactoryCore.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IAccountPermissions$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IAccountPermissions.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IAccountPermissions_V1$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IAccountPermissions_V1.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$contracts$2d$js$2f$dist$2f$abis$2f$IAccount$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IAccount.json (json)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$eventemitter3$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/eventemitter3/index.mjs [app-ssr] (ecmascript) <module evaluation>");
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
/**
 * Handles auction listings
 * @public
 */ class MarketplaceAuction {
    constructor(contractWrapper, storage){
        this.contractWrapper = contractWrapper;
        this.storage = storage;
        this.encoder = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["C"](contractWrapper);
    }
    getAddress() {
        return this.contractWrapper.address;
    }
    /** ******************************
   * READ FUNCTIONS
   *******************************/ /**
   * Get an Auction listing by id
   *
   * @param listingId - the listing Id
   * @returns The Auction listing object
   */ async getListing(listingId) {
        const listing = await this.contractWrapper.read("listings", [
            listingId
        ]);
        if (listing.listingId.toString() !== listingId.toString()) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"](this.getAddress(), listingId.toString());
        }
        if (listing.listingType !== __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Auction) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["W"](this.getAddress(), listingId.toString(), "Direct", "Auction");
        }
        return await this.mapListing(listing);
    }
    /**
   * Get Highest Bid
   *
   * @remarks Get the current highest bid of an active auction.
   *
   * @example
   * ```javascript
   * // The listing ID of the auction that closed
   * const listingId = 0;
   *
   * contract.auction.
   *   .getWinningBid(listingId)
   *   .then((offer) => console.log(offer))
   *   .catch((err) => console.error(err));
   * ```
   */ async getWinningBid(listingId) {
        await this.validateListing(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId));
        const offers = await this.contractWrapper.read("winningBid", [
            listingId
        ]);
        if (offers.offeror === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$constants$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__constants$3e$__["constants"].AddressZero) {
            return undefined;
        }
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$marketplace$2d$9183b935$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["m"])(this.contractWrapper.getProvider(), __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId), offers);
    }
    /**
   * Get Auction Winner
   *
   * @remarks Get the winner of the auction after an auction ends.
   *
   * @example
   * ```javascript
   * // The listing ID of the auction that closed
   * const listingId = 0;
   *
   * contract.auction.
   *   .getWinner(listingId)
   *   .then((auctionWinner) => console.log(auctionWinner))
   *   .catch((err) => console.error(err));
   * ```
   */ async getWinner(listingId) {
        const listing = await this.validateListing(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId));
        const offers = await this.contractWrapper.read("winningBid", [
            listingId
        ]);
        const now = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(Math.floor(Date.now() / 1000));
        const endTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listing.endTimeInEpochSeconds);
        // if we have a winner in the map and the current time is past the endtime of the auction return the address of the winner
        if (now.gt(endTime) && offers.offeror !== __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$constants$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__constants$3e$__["constants"].AddressZero) {
            return offers.offeror;
        }
        // otherwise fall back to query filter things
        // TODO this should be via indexer or direct contract call
        const contractEvents = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$appuri$2d$c7bd9720$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"](this.contractWrapper);
        const closedAuctions = await contractEvents.getEvents("AuctionClosed");
        const auction = closedAuctions.find((a)=>a.data.listingId.eq(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId)));
        if (!auction) {
            throw new Error(`Could not find auction with listingId ${listingId} in closed auctions`);
        }
        return auction.data.winningBidder;
    }
    /** ******************************
   * WRITE FUNCTIONS
   *******************************/ /**
   * Create Auction
   *
   * @remarks Create a new auction where people can bid on an asset.
   *
   * @example
   * ```javascript
   * // Data of the auction you want to create
   * const auction = {
   *   // address of the contract the asset you want to list is on
   *   assetContractAddress: "0x...",
   *   // token ID of the asset you want to list
   *   tokenId: "0",
   *  // when should the listing open up for offers
   *   startTimestamp: new Date(),
   *   // how long the listing will be open for
   *   listingDurationInSeconds: 86400,
   *   // how many of the asset you want to list
   *   quantity: 1,
   *   // address of the currency contract that will be used to pay for the listing
   *   currencyContractAddress: NATIVE_TOKEN_ADDRESS,
   *   // how much people would have to bid to instantly buy the asset
   *   buyoutPricePerToken: "10",
   *   // the minimum bid that will be accepted for the token
   *   reservePricePerToken: "1.5",
   * }
   *
   * const tx = await contract.auction.createListing(auction);
   * const receipt = tx.receipt; // the transaction receipt
   * const id = tx.id; // the id of the newly created listing
   * ```
   */ createListing = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listing)=>{
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$marketplace$2d$9183b935$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["v"])(listing);
        const resolvedAssetAddress = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["aQ"])(listing.assetContractAddress);
        const resolvedCurrencyAddress = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["aQ"])(listing.currencyContractAddress);
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$marketplace$2d$9183b935$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])(this.contractWrapper, this.getAddress(), resolvedAssetAddress, listing.tokenId, await this.contractWrapper.getSignerAddress());
        const normalizedPricePerToken = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$normalizePriceValue$2d$c41e4879$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["n"])(this.contractWrapper.getProvider(), listing.buyoutPricePerToken, resolvedCurrencyAddress);
        const normalizedReservePrice = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$normalizePriceValue$2d$c41e4879$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["n"])(this.contractWrapper.getProvider(), listing.reservePricePerToken, resolvedCurrencyAddress);
        let listingStartTime = Math.floor(listing.startTimestamp.getTime() / 1000);
        const block = await this.contractWrapper.getProvider().getBlock("latest");
        const blockTime = block.timestamp;
        if (listingStartTime < blockTime) {
            listingStartTime = blockTime;
        }
        const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "createListing",
            args: [
                {
                    assetContract: resolvedAssetAddress,
                    tokenId: listing.tokenId,
                    buyoutPricePerToken: normalizedPricePerToken,
                    currencyToAccept: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$cleanCurrencyAddress$2d$049d84d8$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["c"])(resolvedCurrencyAddress),
                    listingType: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Auction,
                    quantityToList: listing.quantity,
                    reservePricePerToken: normalizedReservePrice,
                    secondsUntilEndTime: listing.listingDurationInSeconds,
                    startTime: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingStartTime)
                }
            ],
            parse: (receipt)=>{
                const event = this.contractWrapper.parseLogs("ListingAdded", receipt?.logs);
                return {
                    id: event[0].args.listingId,
                    receipt
                };
            }
        });
        tx.setGasLimitMultiple(1.2);
        return tx;
    });
    /**
   * Create a batch of new auctions
   *
   * @remarks Create a batch of new auctions on the marketplace
   *
   * @example
   * ```javascript
   * const auctions = [...];
   * const tx = await contract.auction.createListingsBatch(auctions);
   * ```
   */ createListingsBatch = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listings)=>{
        const data = (await Promise.all(listings.map((listing)=>this.createListing.prepare(listing)))).map((tx)=>tx.encode());
        const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "multicall",
            args: [
                data
            ],
            parse: (receipt)=>{
                const events = this.contractWrapper.parseLogs("ListingAdded", receipt?.logs);
                return events.map((event)=>{
                    return {
                        id: event.args.listingId,
                        receipt
                    };
                });
            }
        });
        tx.setGasLimitMultiple(1.2);
        return tx;
    });
    /**
   * Buyout Auction
   *
   * @remarks Buy a specific direct listing from the marketplace.
   *
   * @example
   * ```javascript
   * // The listing ID of the asset you want to buy
   * const listingId = 0;
   *
   * await contract.auction.buyoutListing(listingId);
   * ```
   */ buyoutListing = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listingId)=>{
        const listing = await this.validateListing(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId));
        const currencyMetadata = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(this.contractWrapper.getProvider(), listing.currencyContractAddress);
        return this.makeBid.prepare(listingId, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$utils$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__utils$3e$__["utils"].formatUnits(listing.buyoutPrice, currencyMetadata.decimals));
    });
    /**
   * Bid On Auction
   *
   * @remarks Make a bid on an auction listing
   *
   * @example
   * ```javascript
   * // The listing ID of the asset you want to bid on
   * const listingId = 0;
   * // The price you are willing to bid for a single token of the listing
   * const pricePerToken = 1;
   *
   * await contract.auction.makeBid(listingId, pricePerToken);
   * ```
   */ makeBid = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listingId, pricePerToken)=>{
        const listing = await this.validateListing(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId));
        const normalizedPrice = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$normalizePriceValue$2d$c41e4879$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["n"])(this.contractWrapper.getProvider(), pricePerToken, listing.currencyContractAddress);
        if (normalizedPrice.eq(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(0))) {
            throw new Error("Cannot make a bid with 0 value");
        }
        const bidBuffer = await this.contractWrapper.read("bidBufferBps", []);
        const winningBid = await this.getWinningBid(listingId);
        if (winningBid) {
            const isWinner = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$marketplace$2d$9183b935$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(winningBid.pricePerToken, normalizedPrice, bidBuffer);
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(isWinner, "Bid price is too low based on the current winning bid and the bid buffer");
        } else {
            const tokenPrice = normalizedPrice;
            const reservePrice = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listing.reservePrice);
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(tokenPrice.gte(reservePrice), "Bid price is too low based on reserve price");
        }
        const quantity = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listing.quantity);
        const value = normalizedPrice.mul(quantity);
        const overrides = await this.contractWrapper.getCallOverrides() || {};
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$setErc20Allowance$2d$41394a37$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["s"])(this.contractWrapper, value, listing.currencyContractAddress, overrides);
        const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "offer",
            args: [
                listingId,
                listing.quantity,
                listing.currencyContractAddress,
                normalizedPrice,
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$constants$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__constants$3e$__["constants"].MaxUint256
            ],
            overrides
        });
        tx.setGasLimitMultiple(1.2);
        return tx;
    });
    /**
   * Cancel Auction Listing
   *
   * @remarks Cancel an auction listing on the marketplace
   *
   * @example
   * ```javascript
   * // The listing ID of the auction listing you want to cancel
   * const listingId = "0";
   *
   * await contract.auction.cancelListing(listingId);
   * ```
   */ cancelListing = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listingId)=>{
        const listing = await this.validateListing(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId));
        const now = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(Math.floor(Date.now() / 1000));
        const startTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listing.startTimeInEpochSeconds);
        const offers = await this.contractWrapper.read("winningBid", [
            listingId
        ]);
        if (now.gt(startTime) && offers.offeror !== __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$constants$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__constants$3e$__["constants"].AddressZero) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["t"](listingId.toString());
        }
        const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "closeAuction",
            args: [
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId),
                await this.contractWrapper.getSignerAddress()
            ]
        });
        tx.setGasLimitMultiple(1.2);
        return tx;
    });
    /**
   * Close the Auction for the buyer or the seller
   *
   * @remarks Closes the Auction and executes the sale for the buyer or the seller.
   *
   * @example
   * ```javascript
   * // The listing ID of the auction listing you want to close
   * const listingId = "0";
   * await contract.auction.closeListing(listingId);
   * ```
   *
   * @param listingId - the auction  listing ud to close
   * @param closeFor - optionally pass the auction creator address or winning bid offeror address to close the auction on their behalf
   */ closeListing = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listingId, closeFor)=>{
        if (!closeFor) {
            closeFor = await this.contractWrapper.getSignerAddress();
        }
        const listing = await this.validateListing(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId));
        try {
            const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
                contractWrapper: this.contractWrapper,
                method: "closeAuction",
                args: [
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId),
                    closeFor
                ]
            });
            tx.setGasLimitMultiple(1.2);
            return tx;
        } catch (err) {
            if (err.message.includes("cannot close auction before it has ended")) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["w"](listingId.toString(), listing.endTimeInEpochSeconds.toString());
            } else {
                throw err;
            }
        }
    });
    /**
   * Execute the Auction Sale
   *
   * @remarks Closes the Auction and executes the sale for both parties.
   *
   * @example
   * ```javascript
   * // The listing ID of the auction listing you want to close
   * const listingId = "0";
   * await contract.auction.executeSale(listingId);
   * ```
   *
   * @param listingId - the auction  listing ud to close
   */ executeSale = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listingId)=>{
        const listing = await this.validateListing(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId));
        try {
            const winningBid = await this.getWinningBid(listingId);
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(winningBid, "No winning bid found");
            const closeForSeller = this.encoder.encode("closeAuction", [
                listingId,
                listing.sellerAddress
            ]);
            const closeForBuyer = this.encoder.encode("closeAuction", [
                listingId,
                winningBid.buyerAddress
            ]);
            const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
                contractWrapper: this.contractWrapper,
                method: "multicall",
                args: [
                    closeForSeller,
                    closeForBuyer
                ]
            });
            tx.setGasLimitMultiple(1.2);
            return tx;
        } catch (err) {
            if (err.message.includes("cannot close auction before it has ended")) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["w"](listingId.toString(), listing.endTimeInEpochSeconds.toString());
            } else {
                throw err;
            }
        }
    });
    /**
   * Update an Auction listing with new metadata
   * @param listing - the listing id to update
   */ updateListing = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listing)=>{
        const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "updateListing",
            args: [
                listing.id,
                listing.quantity,
                listing.reservePrice,
                listing.buyoutPrice,
                listing.currencyContractAddress,
                listing.startTimeInEpochSeconds,
                listing.endTimeInEpochSeconds
            ]
        });
        tx.setGasLimitMultiple(1.2);
        return tx;
    });
    /**
   * Get the buffer in basis points between offers
   */ async getBidBufferBps() {
        return this.contractWrapper.read("bidBufferBps", []);
    }
    /**
   * returns the minimum bid a user can place to outbid the previous highest bid
   * @param listingId - the listing id of the auction
   */ async getMinimumNextBid(listingId) {
        // we can fetch all of these at the same time using promise.all
        const [currentBidBufferBps, winningBid, listing] = await Promise.all([
            this.getBidBufferBps(),
            this.getWinningBid(listingId),
            this.validateListing(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId))
        ]);
        const currentBidOrReservePrice = winningBid ? // if there is a winning bid use the value of it
        winningBid.currencyValue.value : // if there is no winning bid use the reserve price
        listing.reservePrice;
        const minimumNextBid = currentBidOrReservePrice.add(// the addition of the current bid and the buffer
        // (have to divide by 10000 to get the fraction of the buffer (since it's in basis points))
        currentBidOrReservePrice.mul(currentBidBufferBps).div(10000));
        // it's more useful to return a currency value here
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(this.contractWrapper.getProvider(), listing.currencyContractAddress, minimumNextBid);
    }
    /** ******************************
   * PRIVATE FUNCTIONS
   *******************************/ /**
   * Throws error if listing could not be found
   *
   * @param listingId - Listing to check for
   */ async validateListing(listingId) {
        try {
            return await this.getListing(listingId);
        } catch (err) {
            console.error(`Error getting the listing with id ${listingId}`);
            throw err;
        }
    }
    /**
   * Helper method maps the auction listing to the auction listing interface.
   *
   * @internal
   * @param listing - The listing to map, as returned from the contract.
   * @returns  The mapped interface.
   */ async mapListing(listing) {
        return {
            assetContractAddress: listing.assetContract,
            buyoutPrice: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listing.buyoutPricePerToken),
            currencyContractAddress: listing.currency,
            buyoutCurrencyValuePerToken: await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(this.contractWrapper.getProvider(), listing.currency, listing.buyoutPricePerToken),
            id: listing.listingId.toString(),
            tokenId: listing.tokenId,
            quantity: listing.quantity,
            startTimeInEpochSeconds: listing.startTime,
            asset: await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["c"])(listing.assetContract, this.contractWrapper.getProvider(), listing.tokenId, this.storage),
            reservePriceCurrencyValuePerToken: await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(this.contractWrapper.getProvider(), listing.currency, listing.reservePricePerToken),
            reservePrice: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listing.reservePricePerToken),
            endTimeInEpochSeconds: listing.endTime,
            sellerAddress: listing.tokenOwner,
            type: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Auction
        };
    }
}
/**
 * Handles direct listings
 * @public
 */ class MarketplaceDirect {
    constructor(contractWrapper, storage){
        this.contractWrapper = contractWrapper;
        this.storage = storage;
    }
    getAddress() {
        return this.contractWrapper.address;
    }
    /** ******************************
   * READ FUNCTIONS
   *******************************/ /**
   * Get a direct listing by id
   *
   * @param listingId - the listing id
   * @returns The Direct listing object
   */ async getListing(listingId) {
        const listing = await this.contractWrapper.read("listings", [
            listingId
        ]);
        if (listing.assetContract === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$constants$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__constants$3e$__["constants"].AddressZero) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"](this.getAddress(), listingId.toString());
        }
        if (listing.listingType !== __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Direct) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["W"](this.getAddress(), listingId.toString(), "Auction", "Direct");
        }
        return await this.mapListing(listing);
    }
    /**
   * Get the active offer on a listing
   * @param listingId - the listing id
   * @param address - the address that made the offer
   */ async getActiveOffer(listingId, address) {
        await this.validateListing(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId));
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$utils$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__utils$3e$__["utils"].isAddress(address), "Address must be a valid address");
        const offers = await this.contractWrapper.read("offers", [
            listingId,
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["aQ"])(address)
        ]);
        if (offers.offeror === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$constants$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__constants$3e$__["constants"].AddressZero) {
            return undefined;
        }
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$marketplace$2d$9183b935$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["m"])(this.contractWrapper.getProvider(), __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId), offers);
    }
    /** ******************************
   * WRITE FUNCTIONS
   *******************************/ /**
   * Create Direct Listing
   *
   * @remarks Create a new listing on the marketplace where people can buy an asset directly.
   *
   * @example
   * ```javascript
   * // Data of the listing you want to create
   * const listing = {
   *   // address of the contract the asset you want to list is on
   *   assetContractAddress: "0x...",
   *   // token ID of the asset you want to list
   *   tokenId: "0",
   *   // when should the listing open up for offers
   *   startTimestamp: new Date(),
   *   // how long the listing will be open for
   *   listingDurationInSeconds: 86400,
   *   // how many of the asset you want to list
   *   quantity: 1,
   *   // address of the currency contract that will be used to pay for the listing
   *   currencyContractAddress: NATIVE_TOKEN_ADDRESS,
   *   // how much the asset will be sold for
   *   buyoutPricePerToken: "1.5",
   * }
   *
   * const tx = await contract.direct.createListing(listing);
   * const receipt = tx.receipt; // the transaction receipt
   * const id = tx.id; // the id of the newly created listing
   * ```
   */ createListing = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listing)=>{
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$marketplace$2d$9183b935$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["v"])(listing);
        const resolvedAssetAddress = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["aQ"])(listing.assetContractAddress);
        const resolvedCurrencyAddress = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["aQ"])(listing.currencyContractAddress);
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$marketplace$2d$9183b935$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])(this.contractWrapper, this.getAddress(), resolvedAssetAddress, listing.tokenId, await this.contractWrapper.getSignerAddress());
        const normalizedPricePerToken = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$normalizePriceValue$2d$c41e4879$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["n"])(this.contractWrapper.getProvider(), listing.buyoutPricePerToken, resolvedCurrencyAddress);
        let listingStartTime = Math.floor(listing.startTimestamp.getTime() / 1000);
        const block = await this.contractWrapper.getProvider().getBlock("latest");
        const blockTime = block.timestamp;
        if (listingStartTime < blockTime) {
            listingStartTime = blockTime;
        }
        const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "createListing",
            args: [
                {
                    assetContract: resolvedAssetAddress,
                    tokenId: listing.tokenId,
                    buyoutPricePerToken: normalizedPricePerToken,
                    currencyToAccept: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$cleanCurrencyAddress$2d$049d84d8$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["c"])(resolvedCurrencyAddress),
                    listingType: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Direct,
                    quantityToList: listing.quantity,
                    reservePricePerToken: normalizedPricePerToken,
                    secondsUntilEndTime: listing.listingDurationInSeconds,
                    startTime: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingStartTime)
                }
            ],
            parse: (receipt)=>{
                const event = this.contractWrapper.parseLogs("ListingAdded", receipt?.logs);
                return {
                    id: event[0].args.listingId,
                    receipt
                };
            }
        });
        tx.setGasLimitMultiple(1.2);
        return tx;
    });
    /**
   * Create a batch of new listings
   *
   * @remarks Create a batch of new listings on the marketplace
   *
   * @example
   * ```javascript
   * const listings = [...];
   * const tx = await contract.direct.createListingsBatch(listings);
   * ```
   */ createListingsBatch = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listings)=>{
        const data = (await Promise.all(listings.map((listing)=>this.createListing.prepare(listing)))).map((tx)=>tx.encode());
        const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "multicall",
            args: [
                data
            ],
            parse: (receipt)=>{
                const events = this.contractWrapper.parseLogs("ListingAdded", receipt?.logs);
                return events.map((event)=>{
                    return {
                        id: event.args.listingId,
                        receipt
                    };
                });
            }
        });
        tx.setGasLimitMultiple(1.2);
        return tx;
    });
    /**
   * Make an offer for a Direct Listing
   *
   * @remarks Make an offer on a direct listing
   *
   * @example
   * ```javascript
   * import { ChainId, NATIVE_TOKENS } from "@thirdweb-dev/sdk";
   *
   * // The listing ID of the asset you want to offer on
   * const listingId = 0;
   * // The price you are willing to offer per token
   * const pricePerToken = 1;
   * // The quantity of tokens you want to receive for this offer
   * const quantity = 1;
   * // The address of the currency you are making the offer in (must be ERC-20)
   * const currencyContractAddress = NATIVE_TOKENS[ChainId.Rinkeby].wrapped.address
   *
   * await contract.direct.makeOffer(
   *   listingId,
   *   quantity,
   *   currencyContractAddress,
   *   pricePerToken
   * );
   * ```
   */ makeOffer = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listingId, quantityDesired, currencyContractAddress, pricePerToken, expirationDate)=>{
        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["i"])(currencyContractAddress)) {
            throw new Error("You must use the wrapped native token address when making an offer with a native token");
        }
        const normalizedPrice = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$normalizePriceValue$2d$c41e4879$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["n"])(this.contractWrapper.getProvider(), pricePerToken, currencyContractAddress);
        try {
            await this.getListing(listingId);
        } catch (err) {
            console.error("Failed to get listing, err =", err);
            throw new Error(`Error getting the listing with id ${listingId}`);
        }
        const quantity = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(quantityDesired);
        const value = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(normalizedPrice).mul(quantity);
        const overrides = await this.contractWrapper.getCallOverrides() || {};
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$setErc20Allowance$2d$41394a37$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["s"])(this.contractWrapper, value, currencyContractAddress, overrides);
        let expirationTimestamp = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$constants$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__constants$3e$__["constants"].MaxUint256;
        if (expirationDate) {
            expirationTimestamp = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(Math.floor(expirationDate.getTime() / 1000));
        }
        const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "offer",
            args: [
                listingId,
                quantityDesired,
                currencyContractAddress,
                normalizedPrice,
                expirationTimestamp
            ],
            overrides
        });
        tx.setGasLimitMultiple(1.2);
        return tx;
    });
    /**
   * Accept an offer on a direct listing
   *
   * @remarks Accept an offer on a direct listing
   *
   * @example
   * ```javascript
   * // The listing ID of the asset you want to bid on
   * const listingId = 0;
   * // The price you are willing to bid for a single token of the listing
   * const offeror = "0x...";
   *
   * await contract.direct.acceptOffer(listingId, offeror);
   * ```
   */ acceptOffer = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listingId, addressOfOfferor)=>{
        /**
     * TODO:
     * - Provide better error handling if offer is too low.
     */ await this.validateListing(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId));
        const resolvedAddress = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["aQ"])(addressOfOfferor);
        const offer = await this.contractWrapper.read("offers", [
            listingId,
            resolvedAddress
        ]);
        const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "acceptOffer",
            args: [
                listingId,
                resolvedAddress,
                offer.currency,
                offer.pricePerToken
            ]
        });
        tx.setGasLimitMultiple(1.2);
        return tx;
    });
    /**
   * Buy a Listing
   *
   * @remarks Buy a specific direct listing from the marketplace.
   *
   * @example
   * ```javascript
   * // The listing ID of the asset you want to buy
   * const listingId = 0;
   * // Quantity of the asset you want to buy
   * const quantityDesired = 1;
   *
   * await contract.direct.buyoutListing(listingId, quantityDesired);
   * ```
   *
   * @param listingId - The listing id to buy
   * @param quantityDesired - the quantity to buy
   * @param receiver - optional receiver of the bought listing if different from the connected wallet
   */ buyoutListing = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listingId, quantityDesired, receiver)=>{
        const listing = await this.validateListing(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId));
        const { valid, error } = await this.isStillValidListing(listing, quantityDesired);
        if (!valid) {
            throw new Error(`Listing ${listingId} is no longer valid. ${error}`);
        }
        const buyFor = receiver ? receiver : await this.contractWrapper.getSignerAddress();
        const quantity = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(quantityDesired);
        const value = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listing.buyoutPrice).mul(quantity);
        const overrides = await this.contractWrapper.getCallOverrides() || {};
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$setErc20Allowance$2d$41394a37$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["s"])(this.contractWrapper, value, listing.currencyContractAddress, overrides);
        const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "buy",
            args: [
                listingId,
                buyFor,
                quantity,
                listing.currencyContractAddress,
                value
            ],
            overrides
        });
        tx.setGasLimitMultiple(1.2);
        return tx;
    });
    /**
   * Update a Direct listing with new metadata.
   *
   * Note: cannot update a listing with a new quantity of 0. Use `cancelDirectListing` to remove a listing instead.
   *
   * @param listing - the new listing information
   */ updateListing = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listing)=>{
        const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "updateListing",
            args: [
                listing.id,
                listing.quantity,
                listing.buyoutPrice,
                // reserve price, doesn't matter for direct listing
                listing.buyoutPrice,
                await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["aQ"])(listing.currencyContractAddress),
                listing.startTimeInSeconds,
                listing.secondsUntilEnd
            ]
        });
        tx.setGasLimitMultiple(1.2);
        return tx;
    });
    /**
   * Cancel Direct Listing
   *
   * @remarks Cancel a direct listing on the marketplace
   *
   * @example
   * ```javascript
   * // The listing ID of the direct listing you want to cancel
   * const listingId = "0";
   *
   * await contract.direct.cancelListing(listingId);
   * ```
   */ cancelListing = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listingId)=>{
        const tx = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "cancelDirectListing",
            args: [
                listingId
            ]
        });
        tx.setGasLimitMultiple(1.2);
        return tx;
    });
    /** ******************************
   * PRIVATE FUNCTIONS
   *******************************/ /**
   * Throws error if listing could not be found
   *
   * @param listingId - Listing to check for
   */ async validateListing(listingId) {
        try {
            return await this.getListing(listingId);
        } catch (err) {
            console.error(`Error getting the listing with id ${listingId}`);
            throw err;
        }
    }
    /**
   * Helper method maps the auction listing to the direct listing interface.
   *
   * @internal
   * @param listing - The listing to map, as returned from the contract.
   * @returns  The mapped interface.
   */ async mapListing(listing) {
        return {
            assetContractAddress: listing.assetContract,
            buyoutPrice: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listing.buyoutPricePerToken),
            currencyContractAddress: listing.currency,
            buyoutCurrencyValuePerToken: await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(this.contractWrapper.getProvider(), listing.currency, listing.buyoutPricePerToken),
            id: listing.listingId.toString(),
            tokenId: listing.tokenId,
            quantity: listing.quantity,
            startTimeInSeconds: listing.startTime,
            asset: await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["c"])(listing.assetContract, this.contractWrapper.getProvider(), listing.tokenId, this.storage),
            secondsUntilEnd: listing.endTime,
            sellerAddress: listing.tokenOwner,
            type: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Direct
        };
    }
    /**
   * Use this method to check if a direct listing is still valid.
   *
   * Ways a direct listing can become invalid:
   * 1. The asset holder transferred the asset to another wallet
   * 2. The asset holder burned the asset
   * 3. The asset holder removed the approval on the marketplace
   *
   * @internal
   * @param listing - The listing to check.
   * @returns  True if the listing is valid, false otherwise.
   */ async isStillValidListing(listing, quantity) {
        const approved = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$marketplace$2d$9183b935$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["i"])(this.contractWrapper.getProvider(), this.getAddress(), listing.assetContractAddress, listing.tokenId, listing.sellerAddress);
        if (!approved) {
            return {
                valid: false,
                error: `Token '${listing.tokenId}' from contract '${listing.assetContractAddress}' is not approved for transfer`
            };
        }
        const provider = this.contractWrapper.getProvider();
        const ERC165Abi = (await __turbopack_context__.r("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC165.json (json, async loader)")(__turbopack_context__.i)).default;
        const erc165 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$contracts$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Contract"](listing.assetContractAddress, ERC165Abi, provider);
        const isERC721 = await erc165.supportsInterface(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["I"]);
        const isERC1155 = await erc165.supportsInterface(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"]);
        if (isERC721) {
            const ERC721Abi = (await __turbopack_context__.r("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC721.json (json, async loader)")(__turbopack_context__.i)).default;
            const asset = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$contracts$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Contract"](listing.assetContractAddress, ERC721Abi, provider);
            // Handle reverts in case of non-existent tokens
            let owner;
            try {
                owner = await asset.ownerOf(listing.tokenId);
            } catch (e) {}
            const valid = owner?.toLowerCase() === listing.sellerAddress.toLowerCase();
            return {
                valid,
                error: valid ? undefined : `Seller is not the owner of Token '${listing.tokenId}' from contract '${listing.assetContractAddress} anymore'`
            };
        } else if (isERC1155) {
            const ERC1155Abi = (await __turbopack_context__.r("[project]/node_modules/@thirdweb-dev/contracts-js/dist/abis/IERC1155.json (json, async loader)")(__turbopack_context__.i)).default;
            const asset = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$contracts$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Contract"](listing.assetContractAddress, ERC1155Abi, provider);
            const balance = await asset.balanceOf(listing.sellerAddress, listing.tokenId);
            const valid = balance.gte(quantity || listing.quantity);
            return {
                valid,
                error: valid ? undefined : `Seller does not have enough balance of Token '${listing.tokenId}' from contract '${listing.assetContractAddress} to fulfill the listing`
            };
        } else {
            return {
                valid: false,
                error: "Contract does not implement ERC 1155 or ERC 721."
            };
        }
    }
}
/**
 * Create your own whitelabel marketplace that enables users to buy and sell any digital assets.
 *
 * @example
 *
 * ```javascript
 * import { ThirdwebSDK } from "@thirdweb-dev/sdk";
 *
 * const sdk = new ThirdwebSDK("{{chainName}}");
 * const contract = await sdk.getContract("{{contract_address}}", "marketplace");
 * ```
 *
 * @internal
 * @deprecated use contract.directListings / contract.auctions / contract.offers instead
 */ class Marketplace {
    static contractRoles = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["dM"];
    /**
   * @internal
   */ /**
   * Direct listings
   * @remarks Create and manage direct listings in your marketplace.
   * @example
   * ```javascript
   * // Data of the listing you want to create
   * const listing = {
   *   // address of the NFT contract the asset you want to list is on
   *   assetContractAddress: "0x...",
   *   // token ID of the asset you want to list
   *   tokenId: "0",
   *  // when should the listing open up for offers
   *   startTimestamp: new Date(),
   *   // how long the listing will be open for
   *   listingDurationInSeconds: 86400,
   *   // how many of the asset you want to list
   *   quantity: 1,
   *   // address of the currency contract that will be used to pay for the listing
   *   currencyContractAddress: NATIVE_TOKEN_ADDRESS,
   *   // how much the asset will be sold for
   *   buyoutPricePerToken: "1.5",
   * }
   *
   * const tx = await contract.direct.createListing(listing);
   * const receipt = tx.receipt; // the transaction receipt
   * const listingId = tx.id; // the id of the newly created listing
   *
   * // And on the buyers side:
   * // Quantity of the asset you want to buy
   * const quantityDesired = 1;
   * await contract.direct.buyoutListing(listingId, quantityDesired);
   * ```
   */ /**
   * Auctions
   * @remarks Create and manage auctions in your marketplace.
   * @example
   * ```javascript
   * // Data of the auction you want to create
   * const auction = {
   *   // address of the contract the asset you want to list is on
   *   assetContractAddress: "0x...",
   *   // token ID of the asset you want to list
   *   tokenId: "0",
   *  // when should the listing open up for offers
   *   startTimestamp: new Date(),
   *   // how long the listing will be open for
   *   listingDurationInSeconds: 86400,
   *   // how many of the asset you want to list
   *   quantity: 1,
   *   // address of the currency contract that will be used to pay for the listing
   *   currencyContractAddress: NATIVE_TOKEN_ADDRESS,
   *   // how much people would have to bid to instantly buy the asset
   *   buyoutPricePerToken: "10",
   *   // the minimum bid that will be accepted for the token
   *   reservePricePerToken: "1.5",
   * }
   *
   * const tx = await contract.auction.createListing(auction);
   * const receipt = tx.receipt; // the transaction receipt
   * const listingId = tx.id; // the id of the newly created listing
   *
   * // And on the buyers side:
   * // The price you are willing to bid for a single token of the listing
   * const pricePerToken = 2.6;
   * await contract.auction.makeBid(listingId, pricePerToken);
   * ```
   */ get chainId() {
        return this._chainId;
    }
    constructor(network, address, storage){
        let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
        let abi = arguments.length > 4 ? arguments[4] : undefined;
        let chainId = arguments.length > 5 ? arguments[5] : undefined;
        let contractWrapper = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["cx"](network, address, abi, options, storage);
        this._chainId = chainId;
        this.abi = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["bo"].parse(abi || []);
        this.contractWrapper = contractWrapper;
        this.storage = storage;
        this.metadata = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$appuri$2d$c7bd9720$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["C"](this.contractWrapper, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["c4"], this.storage);
        this.app = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$appuri$2d$c7bd9720$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"](this.contractWrapper, this.metadata, this.storage);
        this.roles = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$roles$2d$fc490e1c$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["C"](this.contractWrapper, Marketplace.contractRoles);
        this.encoder = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["C"](this.contractWrapper);
        this.estimator = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$appuri$2d$c7bd9720$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["G"](this.contractWrapper);
        this.direct = new MarketplaceDirect(this.contractWrapper, this.storage);
        this.auction = new MarketplaceAuction(this.contractWrapper, this.storage);
        this.events = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$appuri$2d$c7bd9720$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"](this.contractWrapper);
        this.platformFees = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$platform$2d$fee$2d$e14ecc39$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["C"](this.contractWrapper);
        this.interceptor = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$contract$2d$interceptor$2d$69c9c882$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["C"](this.contractWrapper);
    }
    onNetworkUpdated(network) {
        this.contractWrapper.updateSignerOrProvider(network);
    }
    getAddress() {
        return this.contractWrapper.address;
    }
    /** ******************************
   * READ FUNCTIONS
   *******************************/ /**
   * Convenience function to get either a direct or auction listing
   *
   * @param listingId - the listing id
   * @returns either a direct or auction listing
   *
   * @remarks Get a listing by its listing id
   * @example
   * ```javascript
   * const listingId = 0;
   * const listing = await contract.getListing(listingId);
   * ```
   */ async getListing(listingId) {
        const listing = await this.contractWrapper.read("listings", [
            listingId
        ]);
        if (listing.assetContract === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$constants$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__constants$3e$__["constants"].AddressZero) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"](this.getAddress(), listingId.toString());
        }
        switch(listing.listingType){
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Auction:
                {
                    return await this.auction.mapListing(listing);
                }
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Direct:
                {
                    return await this.direct.mapListing(listing);
                }
            default:
                {
                    throw new Error(`Unknown listing type: ${listing.listingType}`);
                }
        }
    }
    /**
   * Get all active listings
   *
   * @remarks Fetch all the active listings from this marketplace contract. An active listing means it can be bought or bid on.
   * @example
   * ```javascript
   * const listings = await contract.getActiveListings();
   * const priceOfFirstActiveListing = listings[0].price;
   * ```
   * @param filter - optional filter parameters
   */ async getActiveListings(filter) {
        const rawListings = await this.getAllListingsNoFilter(true);
        const filtered = this.applyFilter(rawListings, filter);
        const now = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(Math.floor(Date.now() / 1000));
        return filtered.filter((l)=>{
            return l.type === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Auction && __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(l.endTimeInEpochSeconds).gt(now) && __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(l.startTimeInEpochSeconds).lte(now) || l.type === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Direct && __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(l.quantity).gt(0);
        });
    }
    /**
   * Get all the listings
   *
   * @remarks Fetch all the listings from this marketplace contract, including sold ones.
   * @example
   * ```javascript
   * const listings = await contract.getAllListings();
   * const priceOfFirstListing = listings[0].price;
   * ```
   *
   * @param filter - optional filter parameters
   */ async getAllListings(filter) {
        const rawListings = await this.getAllListingsNoFilter(false);
        return this.applyFilter(rawListings, filter);
    }
    /**
   * @internal
   */ getAll = this.getAllListings;
    /**
   * Get the total number of Listings
   * @returns The total number listings on the marketplace
   * @public
   */ async getTotalCount() {
        return await this.contractWrapper.read("totalListings", []);
    }
    /**
   * Get whether listing is restricted only to addresses with the Lister role
   */ async isRestrictedToListerRoleOnly() {
        const anyoneCanList = await this.contractWrapper.read("hasRole", [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["H"])("lister"),
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$constants$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__constants$3e$__["constants"].AddressZero
        ]);
        return !anyoneCanList;
    }
    /**
   * Get the buffer in basis points between offers
   */ async getBidBufferBps() {
        return this.contractWrapper.read("bidBufferBps", []);
    }
    /**
   * get the buffer time in seconds between offers
   */ async getTimeBufferInSeconds() {
        return this.contractWrapper.read("timeBuffer", []);
    }
    /**
   * Get all the offers for a listing
   *
   * @remarks Fetch all the offers for a specified direct or auction listing.
   * @example
   * ```javascript
   * const offers = await marketplaceContract.getOffers(listingId);
   * const firstOffer = offers[0];
   * ```
   *
   * @param listingId - the id of the listing to fetch offers for
   */ async getOffers(listingId) {
        // get all new offer events from this contract
        const listingEvents = await this.events.getEvents("NewOffer", {
            order: "desc",
            filters: {
                listingId
            }
        });
        // derive the offers from the events
        return await Promise.all(listingEvents.map((e)=>{
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$marketplace$2d$9183b935$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["m"])(this.contractWrapper.getProvider(), __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(listingId), {
                quantityWanted: e.data.quantityWanted,
                pricePerToken: e.data.quantityWanted.gt(0) ? e.data.totalOfferAmount.div(e.data.quantityWanted) : e.data.totalOfferAmount,
                currency: e.data.currency,
                offeror: e.data.offeror
            });
        }));
    }
    /** ******************************
   * WRITE FUNCTIONS
   *******************************/ /**
   * Purchase NFTs
   * @remarks Buy a Direct or Auction listing on your marketplace.
   * @example
   * ```javascript
   * // The listing ID of the asset you want to buy
   * const listingId = 0;
   * // Quantity of the asset you want to buy
   * const quantityDesired = 1;
   *
   * await contract.buyoutListing(listingId, quantityDesired);
   * ```
   * @param listingId - the listing ID of the listing you want to buy
   * @param quantityDesired - the quantity that you want to buy (for ERC1155 tokens)
   * @param receiver - optional receiver of the bought listing if different from the connected wallet (for direct listings only)
   */ buyoutListing = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listingId, quantityDesired, receiver)=>{
        const listing = await this.contractWrapper.read("listings", [
            listingId
        ]);
        if (listing.listingId.toString() !== listingId.toString()) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"](this.getAddress(), listingId.toString());
        }
        switch(listing.listingType){
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Direct:
                {
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(quantityDesired !== undefined, "quantityDesired is required when buying out a direct listing");
                    return await this.direct.buyoutListing.prepare(listingId, quantityDesired, receiver);
                }
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Auction:
                {
                    return await this.auction.buyoutListing.prepare(listingId);
                }
            default:
                throw Error(`Unknown listing type: ${listing.listingType}`);
        }
    });
    /**
   * Make an offer for a Direct or Auction Listing
   *
   * @remarks Make an offer on a direct or auction listing
   *
   * @example
   * ```javascript
   * // The listing ID of the asset you want to offer on
   * const listingId = 0;
   * // The price you are willing to offer per token
   * const pricePerToken = 0.5;
   * // The quantity of tokens you want to receive for this offer
   * const quantity = 1;
   *
   * await contract.makeOffer(
   *   listingId,
   *   pricePerToken,
   *   quantity,
   * );
   * ```
   */ makeOffer = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (listingId, pricePerToken, quantity)=>{
        const listing = await this.contractWrapper.read("listings", [
            listingId
        ]);
        if (listing.listingId.toString() !== listingId.toString()) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"](this.getAddress(), listingId.toString());
        }
        const chainId = await this.contractWrapper.getChainID();
        switch(listing.listingType){
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Direct:
                {
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tiny$2d$invariant$2f$dist$2f$esm$2f$tiny$2d$invariant$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"])(quantity, "quantity is required when making an offer on a direct listing");
                    return await this.direct.makeOffer.prepare(listingId, quantity, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$fetchCurrencyValue$2d$473fae98$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["i"])(listing.currency) ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a$"][chainId].wrapped.address : listing.currency, pricePerToken);
                }
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Auction:
                {
                    return await this.auction.makeBid.prepare(listingId, pricePerToken);
                }
            default:
                throw Error(`Unknown listing type: ${listing.listingType}`);
        }
    });
    /**
   * Set the Auction bid buffer
   * @remarks A percentage (e.g. 5%) in basis points (5% = 500, 100% = 10000). A new bid is considered to be a winning bid only if its bid amount is at least the bid buffer (e.g. 5%) greater than the previous winning bid. This prevents buyers from making very slightly higher bids to win the auctioned items.
   * @example
   * ```javascript
   * // the bid buffer in basis points
   * const bufferBps = 5_00; // 5%
   * await contract.setBidBufferBps(bufferBps);
   * ```
   * @param bufferBps - the bps value
   */ setBidBufferBps = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (bufferBps)=>{
        await this.roles.verify([
            "admin"
        ], await this.contractWrapper.getSignerAddress());
        const timeBuffer = await this.getTimeBufferInSeconds();
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "setAuctionBuffers",
            args: [
                timeBuffer,
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(bufferBps)
            ]
        });
    });
    /**
   * Set the Auction Time buffer:
   * @remarks Measured in seconds (e.g. 15 minutes or 900 seconds). If a winning bid is made within the buffer of the auction closing (e.g. 15 minutes within the auction closing), the auction's closing time is increased by the buffer to prevent buyers from making last minute winning bids, and to give time to other buyers to make a higher bid if they wish to.
   * @example
   * ```javascript
   * // the time buffer in seconds
   * const bufferInSeconds = 60;
   * await contract.setTimeBufferInSeconds(bufferInSeconds);
   * ```
   * @param bufferInSeconds - the seconds value
   */ setTimeBufferInSeconds = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (bufferInSeconds)=>{
        await this.roles.verify([
            "admin"
        ], await this.contractWrapper.getSignerAddress());
        const bidBuffer = await this.getBidBufferBps();
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "setAuctionBuffers",
            args: [
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(bufferInSeconds),
                bidBuffer
            ]
        });
    });
    /**
   * Restrict listing NFTs only from the specified NFT contract address.
   * It is possible to allow listing from multiple contract addresses.
   * @param contractAddress - the NFT contract address
   */ allowListingFromSpecificAssetOnly = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async (contractAddress)=>{
        const encoded = [];
        const members = await this.roles.get("asset");
        if (members.includes(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$constants$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__constants$3e$__["constants"].AddressZero)) {
            encoded.push(this.encoder.encode("revokeRole", [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["H"])("asset"),
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$constants$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__constants$3e$__["constants"].AddressZero
            ]));
        }
        encoded.push(this.encoder.encode("grantRole", [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["H"])("asset"),
            contractAddress
        ]));
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "multicall",
            args: [
                encoded
            ]
        });
    });
    /**
   * Allow listings from any NFT contract
   */ allowListingFromAnyAsset = /* @__PURE__ */ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["b"])(async ()=>{
        const encoded = [];
        const members = await this.roles.get("asset");
        for(const addr in members){
            encoded.push(this.encoder.encode("revokeRole", [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["H"])("asset"),
                addr
            ]));
        }
        encoded.push(this.encoder.encode("grantRole", [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["H"])("asset"),
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$constants$2f$lib$2e$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__constants$3e$__["constants"].AddressZero
        ]));
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method: "multicall",
            args: [
                encoded
            ]
        });
    });
    /** ******************************
   * PRIVATE FUNCTIONS
   *******************************/ async getAllListingsNoFilter(filterInvalidListings) {
        const listings = await Promise.all(Array.from(Array((await this.contractWrapper.read("totalListings", [])).toNumber()).keys()).map(async (i)=>{
            let listing;
            try {
                listing = await this.getListing(i);
            } catch (err) {
                if (err instanceof __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$index$2d$6d283666$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"]) {
                    return undefined;
                } else {
                    console.warn(`Failed to get listing ${i}' - skipping. Try 'marketplace.getListing(${i})' to get the underlying error.`);
                    return undefined;
                }
            }
            if (listing.type === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$ListingType$2d$e0156743$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["L"].Auction) {
                return listing;
            }
            if (filterInvalidListings) {
                const { valid } = await this.direct.isStillValidListing(listing);
                if (!valid) {
                    return undefined;
                }
            }
            return listing;
        }));
        return listings.filter((l)=>l !== undefined);
    }
    applyFilter(listings, filter) {
        let rawListings = [
            ...listings
        ];
        const start = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(filter?.start || 0).toNumber();
        const count = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$ethersproject$2f$bignumber$2f$lib$2e$esm$2f$bignumber$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["BigNumber"].from(filter?.count || __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$QueryParams$2d$0434a670$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["D"]).toNumber();
        if (filter) {
            if (filter.seller) {
                rawListings = rawListings.filter((seller)=>seller.sellerAddress.toString().toLowerCase() === filter?.seller?.toString().toLowerCase());
            }
            if (filter.tokenContract) {
                rawListings = rawListings.filter((tokenContract)=>tokenContract.assetContractAddress.toString().toLowerCase() === filter?.tokenContract?.toString().toLowerCase());
            }
            if (filter.tokenId !== undefined) {
                rawListings = rawListings.filter((tokenContract)=>tokenContract.tokenId.toString() === filter?.tokenId?.toString());
            }
            rawListings = rawListings.filter((_, index)=>index >= start);
            rawListings = rawListings.slice(0, count);
        }
        return rawListings;
    }
    /**
   * @internal
   */ async prepare(method, args, overrides) {
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$thirdweb$2d$dev$2f$sdk$2f$dist$2f$transactions$2d$89262635$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["T"].fromContractWrapper({
            contractWrapper: this.contractWrapper,
            method,
            args,
            overrides
        });
    }
    /**
   * @internal
   */ async call(functionName, args, overrides) {
        return this.contractWrapper.call(functionName, args, overrides);
    }
}
;
}}),

};

//# sourceMappingURL=node_modules_%40thirdweb-dev_sdk_dist_e4cbf648._.js.map